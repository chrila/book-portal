// select nodes
txtState = document.querySelector("#state-book-" + "<%= @book.id %>");
btReserve = document.querySelector("#bt-reserve-" + "<%= @book.id %>");
row = document.querySelector("#row-book-" + "<%= @book.id %>");
txtTimeout = document.querySelector("#timeout-book-" + "<%= @book.id %>");
btPay = document.querySelector("#bt-pay-" + "<%= @book.id %>");
btUnpay = document.querySelector("#bt-unpay-" + "<%= @book.id %>");

// refresh state text
txtState.innerText = "<%= @book.state %>";

// refresh texts and show/hide nodes based on status
<% if @book.unreserved? %>
  txtTimeout.innerText = "";
  btReserve.value = "Reserve";
  row.classList.remove("book_reserved");
  btPay.classList.add("hidden");
  btUnpay.classList.add("hidden");
<% elsif @book.reserved? %>
  txtTimeout.innerText = "15s";
  btReserve.value = "Unreserve";
  row.classList.add("book_reserved");
<% elsif @book.paid? %>
  txtTimeout.innerText = "";
  btReserve.classList.add("hidden");
  btPay.classList.add("hidden");
  btUnpay.classList.remove("hidden");
<% end %>
